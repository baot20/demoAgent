# SpeakerValidationPreCheckSystem - è®²è€…èº«ä»½éªŒè¯ç³»ç»Ÿ

è¿™ä¸ªç³»ç»Ÿä¸“é—¨ç”¨äºå¯¹åŒ»è¯ä»£è¡¨æäº¤çš„è®²è€…ä¿¡æ¯è¿›è¡Œèº«ä»½éªŒè¯å’Œèµ„è´¨å®¡æ ¸ã€‚ç³»ç»Ÿä¼šæ ¹æ®ä¸åŒè®²è€…æ™ºèƒ½é€‰æ‹©å¯¹åº”çš„æ–‡ä»¶å¤¹è¿›è¡ŒéªŒè¯ï¼Œæ£€æŸ¥è®²è€…èº«ä»½çš„çœŸå®æ€§å’Œæ”¯æ’‘æ–‡æ¡£çš„å®Œæ•´æ€§ï¼Œå¹¶æä¾›è¯¦ç»†çš„éªŒè¯æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®ã€‚

## ğŸ¯ æ ¸å¿ƒéªŒè¯é€»è¾‘

### æ™ºèƒ½æ–‡ä»¶å¤¹é€‰æ‹©æœºåˆ¶
ç³»ç»Ÿæ ¹æ®è®²è€…èº«ä»½æ™ºèƒ½é€‰æ‹©å¯¹åº”çš„S3æ–‡ä»¶å¤¹è¿›è¡ŒéªŒè¯ï¼š

1. **å…·ä½“åŒ»ç”Ÿï¼ˆä¸“å±æ–‡ä»¶å¤¹ + EXAæœç´¢ï¼‰**ï¼š
   - æ£€æŸ¥æ–‡ä»¶å¤¹ï¼š`åŒ»ç”Ÿå§“å-åŒ»é™¢-ç§‘å®¤/`
   - ç¤ºä¾‹ï¼š`å¼ ä¸‰-é•¿æµ·åŒ»é™¢-å¿ƒå†…ç§‘/`ã€`å®‹æ™ºé’¢-ä¸Šæµ·é•¿æµ·åŒ»é™¢-å¿ƒè¡€ç®¡å¤–ç§‘/`
   - éªŒè¯æ–¹å¼ï¼šEXAç½‘ç»œæœç´¢éªŒè¯èº«ä»½çœŸå®æ€§ + ä¸“å±æ–‡ä»¶å¤¹æ–‡æ¡£éªŒè¯

2. **æ— å…·ä½“å§“å**ï¼š
   - éªŒè¯å¤±è´¥ï¼š`"æ— æ³•ä»æ–‡æœ¬ä¸­æå–åŒ»ç”Ÿå§“å"`
   - æä¾›æ”¹è¿›å»ºè®®ï¼šè¦æ±‚æ˜ç¡®æä¾›è®²è€…å…·ä½“å§“å

### åŒé‡éªŒè¯æœºåˆ¶

ç³»ç»Ÿé‡‡ç”¨**èº«ä»½çœŸå®æ€§éªŒè¯** + **æ”¯æ’‘æ–‡æ¡£éªŒè¯**çš„åŒé‡æœºåˆ¶ï¼š

#### èº«ä»½çœŸå®æ€§éªŒè¯
1. **ç‰¹æ®Šæ ‡è¯†ç›´é€š**ï¼šåŒ…å«"é²å¨œ"ç›´æ¥é€šè¿‡ï¼Œä¸è§¦å‘ç½‘ç»œæœç´¢
2. **EXAç½‘ç»œæœç´¢**ï¼šä½¿ç”¨EXA APIæœç´¢åŒ»ç”Ÿä¿¡æ¯ï¼ŒéªŒè¯èº«ä»½çœŸå®æ€§
3. **Bedrock LLMæå–**ï¼šä½¿ç”¨AWS Bedrock Claudeæ¨¡å‹æå–åŒ»ç”Ÿä¿¡æ¯

#### æ”¯æ’‘æ–‡æ¡£éªŒè¯
1. **æ™ºèƒ½æ–‡ä»¶å¤¹é€‰æ‹©**ï¼šæ ¹æ®åŒ»ç”Ÿèº«ä»½é€‰æ‹©å¯¹åº”çš„S3æ–‡ä»¶å¤¹
2. **æ–‡æ¡£æ•°é‡æ£€æŸ¥**ï¼šç¡®ä¿æ–‡æ¡£æ•°é‡æ»¡è¶³æœ€ä½è¦æ±‚ï¼ˆé»˜è®¤>3ä¸ªï¼‰
3. **ä¸“å±æ–‡ä»¶å¤¹**ï¼šæ¯ä¸ªåŒ»ç”Ÿéƒ½æœ‰ç‹¬ç«‹çš„æ–‡ä»¶å¤¹å­˜å‚¨éªŒè¯æ–‡æ¡£

### éªŒè¯æµç¨‹

1. **ä¿¡æ¯æå–**ï¼šä½¿ç”¨Bedrock LLMä»ç”¨æˆ·è¾“å…¥ä¸­æå–åŒ»ç”Ÿå§“åã€åŒ»é™¢ã€ç§‘å®¤ã€èŒç§°
2. **èº«ä»½éªŒè¯**ï¼š
   - EXAç½‘ç»œæœç´¢éªŒè¯èº«ä»½çœŸå®æ€§
   - åŒ¹é…åˆ†æ•°è®¡ç®—ï¼ˆâ‰¥5åˆ†é€šè¿‡éªŒè¯ï¼‰
3. **æ–‡ä»¶å¤¹å­˜åœ¨æ€§æ£€æŸ¥**ï¼šæ£€æŸ¥S3ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ä¸“å±æ–‡ä»¶å¤¹
   - å¦‚æœä¸å­˜åœ¨ä¸“å±æ–‡ä»¶å¤¹ï¼Œç›´æ¥å®¡æ ¸ä¸é€šè¿‡ï¼ˆé²å¨œåŒ»ç”Ÿé™¤å¤–ï¼‰
4. **æ–‡æ¡£éªŒè¯**ï¼šæ£€æŸ¥é€‰å®šæ–‡ä»¶å¤¹ä¸­çš„æ”¯æ’‘æ–‡æ¡£æ•°é‡
5. **ç»¼åˆåˆ¤æ–­**ï¼šèº«ä»½éªŒè¯ + æ–‡ä»¶å¤¹å­˜åœ¨ + æ–‡æ¡£æ•°é‡ = æœ€ç»ˆç»“æœ

### éªŒè¯æ ‡å‡†

- **EXAæœç´¢åŒ¹é…**ï¼šåŒ¹é…åˆ†æ•°â‰¥5åˆ†è®¤ä¸ºèº«ä»½éªŒè¯é€šè¿‡
- **æ–‡ä»¶å¤¹å­˜åœ¨æ€§**ï¼šå¿…é¡»å­˜åœ¨å¯¹åº”çš„ä¸“å±æ–‡ä»¶å¤¹ï¼ˆé²å¨œåŒ»ç”Ÿæ£€æŸ¥tinabao/ï¼‰
- **æ–‡æ¡£æ•°é‡è¦æ±‚**ï¼šæ”¯æ’‘æ–‡æ¡£æ•°é‡å¿…é¡»è¶…è¿‡é…ç½®çš„æœ€ä½è¦æ±‚ï¼ˆé»˜è®¤3ä¸ªï¼‰
- **æ–‡ä»¶å¤¹åŒ¹é…**ï¼šæ¯ä¸ªåŒ»ç”Ÿéƒ½æœ‰ä¸“å±çš„"å§“å-åŒ»é™¢-ç§‘å®¤"æ–‡ä»¶å¤¹

### å®é™…éªŒè¯ç¤ºä¾‹
#### ç¤ºä¾‹2ï¼šé’Ÿå—å±±é™¢å£«ï¼ˆEXAæœç´¢æˆåŠŸï¼‰
```
è¾“å…¥ï¼šé’Ÿå—å±± å¹¿å·åŒ»ç§‘å¤§å­¦é™„å±ç¬¬ä¸€åŒ»é™¢ å‘¼å¸å†…ç§‘ é™¢å£«
æ£€æŸ¥æ–‡ä»¶å¤¹ï¼šé’Ÿå—å±±-å¹¿å·åŒ»ç§‘å¤§å­¦é™„å±ç¬¬ä¸€åŒ»é™¢-å‘¼å¸å†…ç§‘/
EXAæœç´¢ï¼šåŒ¹é…åˆ†æ•°8/10ï¼ŒéªŒè¯é€šè¿‡
ç»“æœï¼šâœ… èº«ä»½éªŒè¯é€šè¿‡ï¼Œä½†éœ€è¦æ£€æŸ¥æ–‡æ¡£æ•°é‡
```

#### ç¤ºä¾‹3ï¼šå¼ ä¸¹åŒ»ç”Ÿï¼ˆEXAæœç´¢å¤±è´¥ï¼‰
```
è¾“å…¥ï¼šå¼ ä¸¹ ä¸Šæµ·å¸‚é•¿æµ·åŒ»é™¢ çš®è‚¤ç§‘ ä¸»ä»»
æ£€æŸ¥æ–‡ä»¶å¤¹ï¼šå¼ ä¸¹-ä¸Šæµ·å¸‚é•¿æµ·åŒ»é™¢-çš®è‚¤ç§‘/
EXAæœç´¢ï¼šåŒ¹é…åˆ†æ•°3/10ï¼ŒéªŒè¯å¤±è´¥
ç»“æœï¼šâŒ ç½‘ç»œæœç´¢éªŒè¯å¤±è´¥ï¼Œä½†ä»æ£€æŸ¥æ–‡æ¡£ä½œä¸ºè¾…åŠ©
```

#### ç¤ºä¾‹4ï¼šæå››åŒ»ç”Ÿï¼ˆæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼‰
```
è¾“å…¥ï¼šæå›› åŒ—äº¬åå’ŒåŒ»é™¢ å¿ƒå†…ç§‘ ä¸»ä»»åŒ»å¸ˆ
æ£€æŸ¥æ–‡ä»¶å¤¹ï¼šæå››-åŒ—äº¬åå’ŒåŒ»é™¢-å¿ƒå†…ç§‘/
ç»“æœï¼šâŒ é¢„å®¡ä¸é€šè¿‡ - æœªæ‰¾åˆ°è®²è€…ä¸“å±æ–‡ä»¶å¤¹
```

#### ç¤ºä¾‹5ï¼šæ— å…·ä½“å§“å
```
è¾“å…¥ï¼šæˆ‘è¯·åˆ°äº†åŒ»ç”Ÿï¼Œç›®å‰å°±èŒé•¿æµ·åŒ»é™¢demoç§‘å®¤
ç»“æœï¼šâŒ é¢„å®¡ä¸é€šè¿‡ - æ— æ³•ä»æ–‡æœ¬ä¸­æå–åŒ»ç”Ÿå§“å
```

## ğŸ“¦ å®‰è£…ä¾èµ–

### åŸºç¡€ä¾èµ–
```bash
pip install -r requirements.txt
```

### å¯é€‰ä¾èµ–ï¼ˆCloudWatchæ—¥å¿—æ”¯æŒï¼‰
ç³»ç»Ÿæ”¯æŒå¯é€‰çš„CloudWatchæ—¥å¿—åŠŸèƒ½ã€‚å¦‚æœæœªå®‰è£…ç›¸å…³ä¾èµ–ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§ä¸ºæ§åˆ¶å°æ—¥å¿—ï¼š

```bash
# å®‰è£…CloudWatchæ—¥å¿—æ”¯æŒï¼ˆå¯é€‰ï¼‰
pip install watchtower

# æˆ–è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
python install_optional_deps.py
```

## âš™ï¸ é…ç½®

### 1. AWSå‡­è¯é…ç½®
ç¡®ä¿ä½ å·²ç»é…ç½®äº†AWSå‡­è¯ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š

```bash
# ä½¿ç”¨AWS CLIé…ç½®
aws configure

# æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡
export AWS_ACCESS_KEY_ID=your_access_key
export AWS_SECRET_ACCESS_KEY=your_secret_key
export AWS_DEFAULT_REGION=us-east-1
```

### 2. ç³»ç»Ÿé…ç½®æ–‡ä»¶
å¤åˆ¶é…ç½®æ¨¡æ¿å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .config.example .config

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„å®é™…ä¿¡æ¯
nano .config
```

é…ç½®æ–‡ä»¶`.config`åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

```ini
[AWS]
ACCESS_KEY_ID = your_access_key_id_here
SECRET_ACCESS_KEY = your_secret_access_key_here
REGION = us-east-1

[EXA]
EXA_API_KEY = your_exa_api_key_here

[S3]
BUCKET_NAME = your-bucket-name

[PREAUDIT]
TARGET_WORD = é²å¨œ
MIN_FILE_COUNT = 3

[CLOUDWATCH]
LOG_GROUP_NAME = /speakervalidation
LOG_STREAM_NAME = speaker-validation-logs
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šåŸºæœ¬ä½¿ç”¨ï¼ˆStrands Agentæ¨¡å¼ï¼‰
```bash
python agent.py
```

### æ–¹å¼äºŒï¼šMCP Serveræ¨¡å¼ï¼ˆæ¨èç”¨äºChatbot UIé›†æˆï¼‰

#### å¯åŠ¨MCP Server
```bash
# å¯åŠ¨MCP Server
python start_mcp_server.py

# æˆ–ç›´æ¥å¯åŠ¨
python mcp_server.py
```

**å¦‚æœä½¿ç”¨ç³»ç»ŸPython**ï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "speaker-validation-precheck": {
      "command": "python",
      "args": ["/Users/tinabao/Documents/code/demoAgent/mcp_server.py"],
      "env": {
        "PYTHONPATH": "/Users/tinabao/Documents/code/demoAgent"
      }
    }
  }
}
```

#### MCPé…ç½®æ­¥éª¤è¯¦è§£

1. **æµ‹è¯•MCP Server**
```bash
# æµ‹è¯•å·¥å…·å‡½æ•°
python test_mcp_server.py

# æµ‹è¯•CloudWatchæ—¥å¿—
python test_cloudwatch_logs.py

# æµ‹è¯•MCP serverå¯åŠ¨
python mcp_server.py
```


### æ–¹å¼ä¸‰ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨
```python
from speaker_validation_tools import perform_preaudit

# æµ‹è¯•é²å¨œåŒ»ç”Ÿï¼ˆå†…éƒ¨éªŒè¯ï¼‰
result1 = perform_preaudit("æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†é²å¨œåŒ»ç”Ÿï¼Œç›®å‰å°±èŒé•¿æµ·åŒ»é™¢demoç§‘å®¤")
print("é²å¨œåŒ»ç”ŸéªŒè¯ç»“æœ:", "é€šè¿‡" if "é¢„å®¡é€šè¿‡" in result1 else "ä¸é€šè¿‡")

# æµ‹è¯•å¼ ä¸‰åŒ»ç”Ÿï¼ˆä¸“å±æ–‡ä»¶å¤¹éªŒè¯ï¼‰
result2 = perform_preaudit("æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†å¼ ä¸‰åŒ»ç”Ÿï¼Œç›®å‰å°±èŒé•¿æµ·åŒ»é™¢å¿ƒå†…ç§‘ï¼ŒèŒç§°ä¸ºä¸»ä»»åŒ»å¸ˆ")
print("å¼ ä¸‰åŒ»ç”ŸéªŒè¯ç»“æœ:", "é€šè¿‡" if "é¢„å®¡é€šè¿‡" in result2 else "ä¸é€šè¿‡")

# æµ‹è¯•å®‹æ™ºé’¢åŒ»ç”Ÿï¼ˆæ–‡æ¡£ä¸è¶³ï¼‰
result3 = perform_preaudit("æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†å®‹æ™ºé’¢åŒ»ç”Ÿï¼Œç›®å‰å°±èŒä¸Šæµ·é•¿æµ·åŒ»é™¢å¿ƒè¡€ç®¡å¤–ç§‘")
print("å®‹æ™ºé’¢åŒ»ç”ŸéªŒè¯ç»“æœ:", "é€šè¿‡" if "é¢„å®¡é€šè¿‡" in result3 else "ä¸é€šè¿‡")

# æµ‹è¯•æ— å…·ä½“å§“å
result4 = perform_preaudit("æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†åŒ»ç”Ÿï¼Œç›®å‰å°±èŒé•¿æµ·åŒ»é™¢demoç§‘å®¤")
print("æ— å§“åéªŒè¯ç»“æœ:", "é€šè¿‡" if "é¢„å®¡é€šè¿‡" in result4 else "ä¸é€šè¿‡")
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·ï¼ˆMCPæ¨¡å¼ï¼‰

### 1. get_current_config
è·å–ç³»ç»Ÿå½“å‰é…ç½®å’ŒéªŒè¯æ ‡å‡†

**å‚æ•°**: æ— 
**è¿”å›**: JSONæ ¼å¼çš„é…ç½®ä¿¡æ¯

### 2. check_string_content
æ£€æŸ¥è®²è€…èº«ä»½ä¿¡æ¯çš„çœŸå®æ€§å’Œå®Œæ•´æ€§

**å‚æ•°**:
- `input_string` (å¿…éœ€): è¦æ£€æŸ¥çš„è®²è€…ä¿¡æ¯
- `target_word` (å¯é€‰): ç‰¹æ®Šæ ‡è¯†ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®ä¸­çš„å€¼

**è¿”å›**: éªŒè¯ç»“æœçš„JSONå¯¹è±¡ï¼ŒåŒ…å«ï¼š
- `verification_passed`: éªŒè¯æ˜¯å¦é€šè¿‡
- `verification_method`: éªŒè¯æ–¹æ³•ï¼ˆdirect_passã€exa_search æˆ– exa_search_failedï¼‰
- `extracted_info`: æå–çš„è®²è€…ä¿¡æ¯ï¼ˆå§“åã€åŒ»é™¢ã€ç§‘å®¤ã€èŒç§°ï¼‰
- `verification_details`: è¯¦ç»†éªŒè¯ç»“æœ
- `exa_search_results`: EXAæœç´¢ç»“æœï¼ˆå¦‚æœè§¦å‘æœç´¢ï¼‰

### 3. list_s3_files
æ£€æŸ¥æ”¯æ’‘æ–‡æ¡£å®Œæ•´æ€§ï¼ˆé»˜è®¤æ£€æŸ¥tinabao/æ–‡ä»¶å¤¹ï¼‰

**å‚æ•°**:
- `bucket_name` (å¯é€‰): S3å­˜å‚¨æ¡¶åç§°ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®ä¸­çš„å€¼

**è¿”å›**: æ–‡æ¡£åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯

### 4. list_s3_files_with_prefix
æ£€æŸ¥æŒ‡å®šå‰ç¼€ä¸‹çš„æ”¯æ’‘æ–‡æ¡£

**å‚æ•°**:
- `bucket_name` (å¯é€‰): S3å­˜å‚¨æ¡¶åç§°
- `prefix` (å¿…éœ€): æ–‡ä»¶å¤¹å‰ç¼€ï¼ˆå¦‚"å¼ ä¸‰-é•¿æµ·åŒ»é™¢-å¿ƒå†…ç§‘/"ï¼‰

**è¿”å›**: æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡æ¡£åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯

### 5. perform_preauditï¼ˆæ¨èï¼‰
æ‰§è¡Œå®Œæ•´çš„è®²è€…èº«ä»½éªŒè¯æµç¨‹

**å‚æ•°**:
- `user_input` (å¿…éœ€): åŒ»è¯ä»£è¡¨æäº¤çš„è®²è€…ä¿¡æ¯
- `bucket_name` (å¯é€‰): S3å­˜å‚¨æ¡¶åç§°

**è¿”å›**: è¯¦ç»†çš„éªŒè¯ç»“æœå’Œæ”¹è¿›å»ºè®®

**æ™ºèƒ½æ–‡ä»¶å¤¹é€‰æ‹©**ï¼š
- é²å¨œåŒ»ç”Ÿ â†’ æ£€æŸ¥ `tinabao/` æ–‡ä»¶å¤¹ï¼ˆä¸è§¦å‘EXAæœç´¢ï¼‰
- å…¶ä»–åŒ»ç”Ÿ â†’ æ£€æŸ¥ `å§“å-åŒ»é™¢-ç§‘å®¤/` æ–‡ä»¶å¤¹ï¼ˆè§¦å‘EXAæœç´¢éªŒè¯ï¼‰

**éªŒè¯æµç¨‹**ï¼š
1. ä½¿ç”¨Bedrock LLMæå–åŒ»ç”Ÿä¿¡æ¯
2. å¦‚æœæ˜¯é²å¨œåŒ»ç”Ÿï¼Œç›´æ¥é€šè¿‡èº«ä»½éªŒè¯
3. å¦‚æœæ˜¯å…¶ä»–åŒ»ç”Ÿï¼Œä½¿ç”¨EXA APIè¿›è¡Œç½‘ç»œæœç´¢éªŒè¯
4. æ ¹æ®åŒ»ç”Ÿä¿¡æ¯é€‰æ‹©å¯¹åº”çš„S3æ–‡ä»¶å¤¹æ£€æŸ¥æ–‡æ¡£
5. ç»¼åˆèº«ä»½éªŒè¯å’Œæ–‡æ¡£éªŒè¯ç»“æœç»™å‡ºæœ€ç»ˆåˆ¤æ–­

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### MCPæ¨¡å¼ä½¿ç”¨ç¤ºä¾‹
åœ¨chatbot UIä¸­ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š
é€šè¿‡çš„æ¡ˆä¾‹

```
æˆ‘æ˜¯åŒ»è¯ä»£è¡¨ï¼Œç°åœ¨ä¸¾è¡Œä¸€åœºåŒ»è¯æ´»åŠ¨ï¼Œæˆ‘ç°åœ¨é‚€è¯·äº†é²å¨œåŒ»ç”Ÿä½œä¸ºè®²è€…ï¼Œå¥¹æ¥è‡ªdemo åŒ»é™¢ demo ç§‘å®¤ï¼Œå·²ç»ä¸Šä¼ æ–‡æ¡£äº† è¯·å®¡æ ¸
```

ä¸é€šè¿‡çš„æ¡ˆä¾‹
```
æˆ‘æ˜¯åŒ»è¯ä»£è¡¨ï¼Œç°åœ¨ä¸¾è¡Œä¸€åœºåŒ»è¯æ´»åŠ¨ï¼Œæˆ‘ç°åœ¨é‚€è¯·äº†å®‹æ™ºé’¢åŒ»ç”Ÿä½œä¸ºè®²è€…ï¼Œå¥¹æ¥è‡ªä¸Šæµ·é•¿æµ·åŒ»é™¢ å¿ƒè¡€ç®¡å¤–ç§‘ï¼Œå·²ç»ä¸Šä¼ æ–‡æ¡£äº† è¯·å®¡æ ¸
```
```
æˆ‘æ˜¯åŒ»è¯ä»£è¡¨ï¼Œç°åœ¨ä¸¾è¡Œä¸€åœºåŒ»è¯æ´»åŠ¨ï¼Œæˆ‘ç°åœ¨é‚€è¯·äº†å¼ ä¸‰åŒ»ç”Ÿä½œä¸ºè®²è€…ï¼Œå¥¹æ¥è‡ªä¸Šæµ·é•¿æµ·åŒ»é™¢ å¿ƒè¡€ç®¡å¤–ç§‘ï¼Œå·²ç»ä¸Šä¼ æ–‡æ¡£äº† è¯·å®¡æ ¸

```

ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨`perform_preaudit`å·¥å…·è¿›è¡Œå®Œæ•´çš„èº«ä»½éªŒè¯æ£€æŸ¥ã€‚

### éªŒè¯ç»“æœç¤ºä¾‹

#### EXAæœç´¢æˆåŠŸæ¡ˆä¾‹ï¼ˆé’Ÿå—å±±é™¢å£«ï¼‰
```json
{
  "verification_passed": true,
  "verification_method": "exa_search",
  "extracted_info": {
    "name": "é’Ÿå—å±±",
    "hospital": "å¹¿å·åŒ»ç§‘å¤§å­¦é™„å±ç¬¬ä¸€åŒ»é™¢",
    "department": "å‘¼å¸å†…ç§‘",
    "title": "é™¢å£«"
  },
  "verification_details": {
    "message": "ç½‘ç»œæœç´¢éªŒè¯é€šè¿‡ï¼ŒåŒ¹é…åˆ†æ•°: 8",
    "confidence_score": 8,
    "search_results_count": 5,
    "matched_results_count": 3
  },
  "exa_search_results": {
    "success": true,
    "verification_passed": true,
    "match_score": 8,
    "total_results": 5,
    "matched_results": [...]
  }
}
```

#### EXAæœç´¢å¤±è´¥æ¡ˆä¾‹ï¼ˆå¼ ä¸¹åŒ»ç”Ÿï¼‰
```json
{
  "verification_passed": false,
  "verification_method": "exa_search_failed",
  "extracted_info": {
    "name": "å¼ ä¸¹",
    "hospital": "ä¸Šæµ·å¸‚é•¿æµ·åŒ»é™¢",
    "department": "çš®è‚¤ç§‘",
    "title": "ä¸»ä»»"
  },
  "verification_details": {
    "message": "ç½‘ç»œæœç´¢éªŒè¯å¤±è´¥ï¼Œä½†è®²è€…ä¿¡æ¯å®Œæ•´ï¼ˆåŒ…å«4ä¸ªå­—æ®µï¼‰",
    "confidence_score": 2,
    "search_error": "æœç´¢ç»“æœä¸åŒ¹é…",
    "info_completeness": "4/4ä¸ªå­—æ®µ"
  },
  "exa_search_results": {
    "success": true,
    "verification_passed": false,
    "match_score": 3,
    "total_results": 5
  }
}
```

#### å¤±è´¥æ¡ˆä¾‹ï¼ˆæ— åŒ»ç”Ÿå§“åï¼‰
```json
{
  "verification_passed": false,
  "verification_method": "",
  "extracted_info": {
    "name": "",
    "hospital": "é•¿æµ·åŒ»é™¢",
    "department": "demoç§‘",
    "title": "å‰¯ä¸»ä»»åŒ»ç”Ÿ"
  },
  "verification_details": {
    "message": "æ— æ³•ä»æ–‡æœ¬ä¸­æå–åŒ»ç”Ÿå§“å",
    "confidence_score": 0
  }
}
```

## ğŸ” æƒé™è¦æ±‚

ç¡®ä¿ä½ çš„AWSç”¨æˆ·/è§’è‰²å…·æœ‰ä»¥ä¸‹æƒé™ï¼š

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::your-bucket-name",
                "arn:aws:s3:::your-bucket-name/*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:DescribeLogGroups",
                "logs:DescribeLogStreams"
            ],
            "Resource": "arn:aws:logs:*:*:log-group:/speakervalidation/*"
        }
    ]
}
```

## ğŸ“Š CloudWatchæ—¥å¿—é›†æˆ

### åŠŸèƒ½ç‰¹æ€§
- **è‡ªåŠ¨æ—¥å¿—ç»„ç®¡ç†**: è‡ªåŠ¨æ£€æµ‹å’Œåˆ›å»ºCloudWatchæ—¥å¿—ç»„
- **è¯¦ç»†äº‹ä»¶è®°å½•**: è®°å½•éªŒè¯ç»“æœã€S3è®¿é—®ã€MCPå·¥å…·è°ƒç”¨ç­‰
- **åŒé‡æ—¥å¿—è¾“å‡º**: CloudWatch Logs + æ§åˆ¶å°è¾“å‡º
- **å¯é€‰åŠŸèƒ½è®¾è®¡**: å¦‚æœwatchtoweræœªå®‰è£…ï¼Œè‡ªåŠ¨é™çº§ä¸ºæ§åˆ¶å°æ—¥å¿—

### å¯ç”¨CloudWatchæ—¥å¿—
```bash
# å®‰è£…å¯é€‰ä¾èµ–
pip install watchtower

# æˆ–ä½¿ç”¨å®‰è£…è„šæœ¬
python install_optional_deps.py

# æµ‹è¯•æ—¥å¿—åŠŸèƒ½
python test_cloudwatch_logs.py
```

### æŸ¥çœ‹æ—¥å¿—
åœ¨AWS CloudWatchæ§åˆ¶å°ä¸­æŸ¥çœ‹æ—¥å¿—ï¼š
- **æ—¥å¿—ç»„**: `/speakervalidation`ï¼ˆæˆ–é…ç½®ä¸­æŒ‡å®šçš„åç§°ï¼‰
- **æ—¥å¿—æµ**: `speaker-validation-logs`ï¼ˆæˆ–é…ç½®ä¸­æŒ‡å®šçš„åç§°ï¼‰

### æ—¥å¿—äº‹ä»¶ç±»å‹
ç³»ç»Ÿè®°å½•ä»¥ä¸‹å…³é”®äº‹ä»¶ï¼š

1. **è®²è€…éªŒè¯äº‹ä»¶**: è®°å½•éªŒè¯ç»“æœã€ç½®ä¿¡åº¦ã€æå–ä¿¡æ¯
2. **S3è®¿é—®äº‹ä»¶**: è®°å½•è®¿é—®æˆåŠŸ/å¤±è´¥ã€æ–‡ä»¶æ•°é‡ã€é”™è¯¯ä¿¡æ¯
3. **MCPå·¥å…·è°ƒç”¨**: è®°å½•å·¥å…·åç§°ã€æ‰§è¡Œæ—¶é—´ã€æˆåŠŸ/å¤±è´¥çŠ¶æ€
4. **ç³»ç»ŸçŠ¶æ€**: è®°å½•å¯åŠ¨ã€åœæ­¢ã€é…ç½®åŠ è½½ç­‰
5. **æ€§èƒ½ç›‘æ§**: è®°å½•å“åº”æ—¶é—´ã€èµ„æºä½¿ç”¨ç­‰

### CloudWatché…ç½®ç¤ºä¾‹
```ini
[CLOUDWATCH]
LOG_GROUP_NAME = /speakervalidation
LOG_STREAM_NAME = speaker-validation-logs
```

### AWSæƒé™è¦æ±‚
ç¡®ä¿AWSå‡­è¯å…·æœ‰ä»¥ä¸‹CloudWatch Logsæƒé™ï¼š

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:DescribeLogGroups",
                "logs:DescribeLogStreams"
            ],
            "Resource": "arn:aws:logs:*:*:log-group:/speakervalidation/*"
        }
    ]
}
```

### æ•…éšœæ’é™¤

#### 1. watchtoweræœªå®‰è£…
```
è­¦å‘Š: watchtower æ¨¡å—æœªå®‰è£…ï¼ŒCloudWatch æ—¥å¿—åŠŸèƒ½å°†è¢«ç¦ç”¨
è¦å¯ç”¨ CloudWatch æ—¥å¿—ï¼Œè¯·è¿è¡Œ: pip install watchtower
```
**è§£å†³æ–¹æ¡ˆ**: è¿è¡Œ `pip install watchtower` æˆ– `python install_optional_deps.py`

#### 2. AWSæƒé™ä¸è¶³
**ç—‡çŠ¶**: CloudWatch æ—¥å¿—å¤„ç†å™¨è®¾ç½®å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ AWS å‡­è¯çš„ CloudWatch Logs æƒé™

#### 3. é…ç½®éªŒè¯å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: è¿è¡Œ `python debug_config.py` æŸ¥çœ‹è¯¦ç»†çš„é…ç½®é—®é¢˜

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **AWSå‡­è¯é”™è¯¯**
   - æ£€æŸ¥AWS CLIé…ç½®æˆ–ç¯å¢ƒå˜é‡
   - éªŒè¯`.config`æ–‡ä»¶ä¸­çš„å‡­è¯ä¿¡æ¯

2. **S3è®¿é—®è¢«æ‹’ç»**
   - æ£€æŸ¥IAMæƒé™å’Œå­˜å‚¨æ¡¶ç­–ç•¥
   - ç¡®è®¤å­˜å‚¨æ¡¶åç§°æ­£ç¡®

3. **CloudWatchæ—¥å¿—å¤±è´¥**
   - æ£€æŸ¥CloudWatch Logsæƒé™å’Œç½‘ç»œè¿æ¥
   - è¿è¡Œ`python test_cloudwatch_logs.py`æµ‹è¯•

4. **MCP Serverå¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥ä¾èµ–
   pip install -r requirements.txt
   
   # æ£€æŸ¥Pythonè·¯å¾„
   which python
   
   # æµ‹è¯•ç‹¬ç«‹å·¥å…·
   python test_mcp_server.py
   ```

5. **è®²è€…ä¿¡æ¯æå–å¤±è´¥**
   - æ£€æŸ¥è¾“å…¥æ–‡æœ¬æ ¼å¼æ˜¯å¦è§„èŒƒ
   - ç¡®è®¤åŒ…å«å¿…è¦çš„èº«ä»½ä¿¡æ¯ï¼ˆå§“åã€åŒ»é™¢ã€ç§‘å®¤ã€èŒç§°ï¼‰

### é…ç½®éªŒè¯
```bash
# éªŒè¯é…ç½®
python test_config.py

# è°ƒè¯•é…ç½®é—®é¢˜
python debug_config.py
```

### ç½‘ç»œæœç´¢é—®é¢˜
å¦‚æœç½‘ç»œæœç´¢åŠŸèƒ½å‡ºç°é—®é¢˜ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯æœç´¢APIé…ç½®
3. æŸ¥çœ‹é˜²ç«å¢™è®¾ç½®
## ğŸ¤– Supervisor Agent é›†æˆ

### Agent åŸºæœ¬ä¿¡æ¯

#### Agent æ ‡è¯†
- **åç§°**: SpeakerValidationPreCheckSystem
- **ç‰ˆæœ¬**: 1.0.0
- **ç±»å‹**: speaker_validation_system
- **åˆ†ç±»**: identity_verification

#### æ ¸å¿ƒåŠŸèƒ½æè¿°
```
è®²è€…èº«ä»½éªŒè¯ç³»ç»ŸAgent - ä¸“é—¨ç”¨äºéªŒè¯åŒ»è¯ä»£è¡¨æäº¤çš„è®²è€…èº«ä»½ä¿¡æ¯çœŸå®æ€§å’Œå®Œæ•´æ€§ã€‚

ä¸»è¦åŠŸèƒ½ï¼š
1. ç‰¹æ®Šæ ‡è¯†ç›´é€šéªŒè¯ï¼ˆå¦‚åŒ…å«"é²å¨œ"çš„è®²è€…ä¿¡æ¯ç›´æ¥é€šè¿‡ï¼‰
2. è®²è€…ä¿¡æ¯æå–å’Œå®Œæ•´æ€§æ£€æŸ¥ï¼ˆå§“åã€åŒ»é™¢ã€ç§‘å®¤ã€èŒç§°ï¼‰
3. ç½‘ç»œæœç´¢éªŒè¯è®²è€…èº«ä»½çœŸå®æ€§
4. æ”¯æ’‘æ–‡æ¡£æ•°é‡éªŒè¯ï¼ˆS3å­˜å‚¨æ¡¶æ–‡ä»¶æ£€æŸ¥ï¼‰
5. ç»¼åˆè¯„ä¼°å’Œè¯¦ç»†éªŒè¯æŠ¥å‘Š

é€‚ç”¨åœºæ™¯ï¼š
- å­¦æœ¯ä¼šè®®è®²è€…èº«ä»½éªŒè¯
- åŒ»å­¦åŸ¹è®­è®²å¸ˆèµ„è´¨å®¡æ ¸
- äº§å“å‘å¸ƒä¼šä¸“å®¶èº«ä»½ç¡®è®¤
- ç»§ç»­æ•™è‚²é¡¹ç›®è®²è€…ç­›é€‰
```

### ğŸ› ï¸ Supervisor Agent è°ƒç”¨æŒ‡å—

#### åŸºæœ¬è°ƒç”¨æ¨¡å¼

##### 1. ç®€å•èº«ä»½éªŒè¯
```python
message = 'è¯·éªŒè¯è®²è€…èº«ä»½ï¼š"æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†å¼ ä¸‰åŒ»ç”Ÿï¼Œç›®å‰å°±èŒåŒ—äº¬åå’ŒåŒ»é™¢å¿ƒå†…ç§‘"'
response = speaker_validation_agent(message)
```

##### 2. è¯¦ç»†èº«ä»½éªŒè¯
```python
message = """
è¯·å¯¹è®²è€…ä¿¡æ¯è¿›è¡Œè¯¦ç»†çš„èº«ä»½éªŒè¯ï¼š"æœ¬æ¬¡æ´»åŠ¨æˆ‘è¯·åˆ°äº†å¼ ä¸‰åŒ»ç”Ÿï¼Œç›®å‰å°±èŒåŒ—äº¬åå’ŒåŒ»é™¢å¿ƒå†…ç§‘ï¼ŒèŒç§°ä¸ºä¸»ä»»åŒ»å¸ˆ"

è¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. ä½¿ç”¨ get_current_config å·¥å…·è·å–å½“å‰éªŒè¯æ ‡å‡†
2. ä½¿ç”¨ check_string_content å·¥å…·æ£€æŸ¥è®²è€…èº«ä»½ä¿¡æ¯
3. ä½¿ç”¨ list_s3_files å·¥å…·æ£€æŸ¥æ”¯æ’‘æ–‡æ¡£æ•°é‡
4. ä½¿ç”¨ perform_preaudit å·¥å…·æ‰§è¡Œå®Œæ•´éªŒè¯æµç¨‹
5. æ ¹æ®éªŒè¯ç»“æœç»™å‡ºæ˜ç¡®çš„"éªŒè¯é€šè¿‡"æˆ–"éªŒè¯å¤±è´¥"çš„ç»“è®º

è¯·è¯¦ç»†è¯´æ˜éªŒè¯è¿‡ç¨‹å’Œç»“æœã€‚
"""
response = speaker_validation_agent(message)
```

##### 3. æ‰¹é‡è®²è€…éªŒè¯
```python
def batch_speaker_validation(speaker_list):
    results = []
    for speaker_info in speaker_list:
        message = f'è¯·éªŒè¯è®²è€…èº«ä»½ï¼š"{speaker_info}"'
        result = speaker_validation_agent(message)
        results.append({
            'speaker_info': speaker_info,
            'result': result,
            'verified': 'éªŒè¯é€šè¿‡' in result
        })
    return results
```

### ç»“æœè§£é‡ŠæŒ‡å—

#### æˆåŠŸå“åº”æ¨¡å¼
- åŒ…å« "è®²è€…éªŒè¯é€šè¿‡" æˆ– "éªŒè¯é€šè¿‡" å…³é”®è¯
- è¯¦ç»†è¯´æ˜é€šè¿‡çš„åŸå› å’ŒéªŒè¯æ–¹æ³•
- åŒ…å«å…·ä½“çš„éªŒè¯æ•°æ®ï¼ˆç½®ä¿¡åº¦ã€æå–ä¿¡æ¯ç­‰ï¼‰

#### å¤±è´¥å“åº”æ¨¡å¼
- åŒ…å« "è®²è€…éªŒè¯å¤±è´¥" æˆ– "éªŒè¯å¤±è´¥" å…³é”®è¯
- æ˜ç¡®è¯´æ˜å¤±è´¥çš„å…·ä½“åŸå› 
- å¯èƒ½çš„åŸå› ï¼š
  - "è®²è€…ä¿¡æ¯ä¸å®Œæ•´ï¼Œä»…åŒ…å«Xä¸ªå­—æ®µ"
  - "æ— æ³•æå–è¶³å¤Ÿçš„èº«ä»½ä¿¡æ¯"
  - "ç½‘ç»œæœç´¢éªŒè¯å¤±è´¥"
  - "æ”¯æ’‘æ–‡æ¡£æ•°é‡ä¸è¶³"

#### ç‰¹æ®Šæƒ…å†µå¤„ç†
- **ç›´é€šéªŒè¯**: åŒ…å«ç‰¹æ®Šæ ‡è¯†çš„è®²è€…ä¿¡æ¯ç›´æ¥é€šè¿‡
- **ç½‘ç»œéªŒè¯**: éœ€è¦è¿›è¡Œåœ¨çº¿æœç´¢éªŒè¯çš„æƒ…å†µ
- **ä¿¡æ¯ä¸è¶³**: æå–çš„è®²è€…ä¿¡æ¯ä¸å¤Ÿå®Œæ•´

### ğŸ¯ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

#### åœºæ™¯1: å­¦æœ¯ä¼šè®®è®²è€…éªŒè¯
```python
def academic_speaker_validation(speaker_info):
    message = f"""
    è¿™æ˜¯ä¸€ä¸ªå­¦æœ¯ä¼šè®®è®²è€…èº«ä»½éªŒè¯è¯·æ±‚ã€‚
    è¯·éªŒè¯ä»¥ä¸‹è®²è€…ä¿¡æ¯çš„çœŸå®æ€§ï¼š"{speaker_info}"
    
    éœ€è¦éªŒè¯ï¼š
    1. è®²è€…çš„èº«ä»½ä¿¡æ¯æ˜¯å¦å®Œæ•´å‡†ç¡®
    2. åŒ»é™¢å’Œç§‘å®¤ä¿¡æ¯æ˜¯å¦çœŸå®
    3. èŒç§°ä¿¡æ¯æ˜¯å¦åŒ¹é…
    4. æ”¯æ’‘æ–‡æ¡£æ˜¯å¦å……è¶³
    
    è¯·ç»™å‡ºè¯¦ç»†çš„éªŒè¯ç»“æœå’Œå¯ä¿¡åº¦è¯„ä¼°ã€‚
    """
    return speaker_validation_agent(message)
```

#### åœºæ™¯2: åŒ»å­¦åŸ¹è®­è®²å¸ˆå®¡æ ¸
```python
def medical_trainer_verification(trainer_info):
    message = f"""
    è¿™æ˜¯åŒ»å­¦åŸ¹è®­è®²å¸ˆèµ„è´¨å®¡æ ¸ã€‚
    è®²å¸ˆä¿¡æ¯ï¼š"{trainer_info}"
    
    è¯·é‡ç‚¹éªŒè¯ï¼š
    1. è®²å¸ˆçš„ä¸“ä¸šèƒŒæ™¯å’Œèµ„è´¨
    2. æ‰€åœ¨åŒ»é™¢çš„æƒå¨æ€§
    3. ç›¸å…³é¢†åŸŸçš„ä¸“ä¸šç»éªŒ
    4. åŸ¹è®­èµ„æ ¼çš„å®Œæ•´æ€§
    
    è¯·æä¾›ä¸“ä¸šçš„å®¡æ ¸æ„è§ã€‚
    """
    return speaker_validation_agent(message)
```

#### åœºæ™¯3: æ¡ä»¶æ€§è®²è€…ç­›é€‰
```python
def conditional_speaker_screening(speaker_candidates):
    qualified_speakers = []
    for candidate in speaker_candidates:
        message = f"""
        è¯·å¯¹å€™é€‰è®²è€…è¿›è¡Œç­›é€‰éªŒè¯ï¼š"{candidate}"
        
        ç­›é€‰æ ‡å‡†ï¼š
        1. èº«ä»½ä¿¡æ¯å®Œæ•´æ€§ >= 80%
        2. æ”¯æ’‘æ–‡æ¡£å……è¶³
        3. ä¸“ä¸šåŒ¹é…åº¦é«˜
        
        å¦‚æœç¬¦åˆæ ‡å‡†ï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€è½®è¯„ä¼°ã€‚
        """
        result = speaker_validation_agent(message)
        if "éªŒè¯é€šè¿‡" in result:
            qualified_speakers.append({
                'candidate': candidate,
                'verification_result': result
            })
    return qualified_speakers
```

### âš™ï¸ é…ç½®å’Œå®šåˆ¶

#### å¯é…ç½®å‚æ•°
- `TARGET_WORD`: ç‰¹æ®Šæ ‡è¯†è¯æ±‡ï¼ˆé»˜è®¤ï¼š"é²å¨œ"ï¼‰
- `MIN_FILE_COUNT`: æ”¯æ’‘æ–‡æ¡£æœ€å°æ•°é‡ï¼ˆé»˜è®¤ï¼š3ï¼‰
- `AWS_REGION`: AWSæœåŠ¡åŒºåŸŸï¼ˆé»˜è®¤ï¼š"us-east-1"ï¼‰
- `S3_BUCKET_NAME`: é»˜è®¤S3å­˜å‚¨æ¡¶åç§°

#### è¿è¡Œæ—¶é…ç½®æŸ¥è¯¢
```python
# Supervisor Agent å¯ä»¥æŸ¥è¯¢å½“å‰é…ç½®
message = "è¯·å‘Šè¯‰æˆ‘å½“å‰çš„è®²è€…éªŒè¯é…ç½®å‚æ•°å’Œæ ‡å‡†"
config_info = speaker_validation_agent(message)
```

### ğŸ” ç›‘æ§å’Œè°ƒè¯•

#### æ€§èƒ½æŒ‡æ ‡
- **å…¸å‹å“åº”æ—¶é—´**: 2-5ç§’
- **å½±å“å› ç´ **: ç½‘ç»œæœç´¢å»¶è¿Ÿã€S3å­˜å‚¨æ¡¶å¤§å°ã€AWS APIå“åº”æ—¶é—´

#### éªŒè¯å‡†ç¡®ç‡
- **ç‰¹æ®Šæ ‡è¯†ç›´é€š**: 100%å‡†ç¡®ç‡
- **ä¿¡æ¯å®Œæ•´æ€§éªŒè¯**: 85-95%å‡†ç¡®ç‡
- **ç½‘ç»œæœç´¢éªŒè¯**: 70-85%å‡†ç¡®ç‡ï¼ˆå–å†³äºæœç´¢ç»“æœè´¨é‡ï¼‰

#### å¥åº·æ£€æŸ¥
```python
# Supervisor Agent å¯ä»¥æ‰§è¡Œå¥åº·æ£€æŸ¥
health_check_message = """
è¯·æ‰§è¡Œè®²è€…éªŒè¯ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼š
1. æ£€æŸ¥å½“å‰é…ç½®æ˜¯å¦æ­£å¸¸
2. æµ‹è¯•S3è¿æ¥æ˜¯å¦æ­£å¸¸
3. éªŒè¯ç½‘ç»œæœç´¢åŠŸèƒ½æ˜¯å¦å·¥ä½œ
4. æµ‹è¯•ä¿¡æ¯æå–åŠŸèƒ½æ˜¯å¦å‡†ç¡®
"""
health_status = speaker_validation_agent(health_check_message)
```

### ğŸš¨ é”™è¯¯å¤„ç†

#### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

1. **ä¿¡æ¯æå–å¤±è´¥**
   - é”™è¯¯ä¿¡æ¯: "æ— æ³•æå–åŒ»ç”Ÿå§“å" æˆ– "ä¿¡æ¯æ ¼å¼ä¸è§„èŒƒ"
   - è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥è¾“å…¥æ–‡æœ¬æ ¼å¼ï¼Œç¡®ä¿åŒ…å«åŸºæœ¬èº«ä»½ä¿¡æ¯

2. **ç½‘ç»œæœç´¢è¶…æ—¶**
   - é”™è¯¯ä¿¡æ¯: "ç½‘ç»œæœç´¢è¶…æ—¶" æˆ– "æœç´¢æœåŠ¡ä¸å¯ç”¨"
   - è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæœç´¢APIé…ç½®

3. **æ”¯æ’‘æ–‡æ¡£ä¸è¶³**
   - é”™è¯¯ä¿¡æ¯: "æ”¯æ’‘æ–‡æ¡£æ•°é‡ä¸è¶³" æˆ– "æ–‡æ¡£éªŒè¯å¤±è´¥"
   - è§£å†³æ–¹æ¡ˆ: ä¸Šä¼ æ›´å¤šç›¸å…³è¯æ˜æ–‡æ¡£åˆ°S3å­˜å‚¨æ¡¶

#### Supervisor Agent é”™è¯¯å¤„ç†ç¤ºä¾‹
```python
def safe_speaker_validation(speaker_info):
    try:
        message = f'è¯·éªŒè¯è®²è€…èº«ä»½ï¼š"{speaker_info}"'
        result = speaker_validation_agent(message)
        
        if "éªŒè¯é€šè¿‡" in result:
            return {"status": "verified", "message": result}
        elif "éªŒè¯å¤±è´¥" in result:
            return {"status": "failed", "message": result}
        else:
            return {"status": "pending", "message": result}
            
    except Exception as e:
        return {"status": "error", "message": f"éªŒè¯ç³»ç»Ÿè°ƒç”¨å¤±è´¥: {str(e)}"}
```

### ğŸ“š å®Œæ•´é›†æˆç¤ºä¾‹

å‚è€ƒ `supervisor_example.py` æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†å®Œæ•´çš„ Supervisor Agent é›†æˆç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ï¼š

1. åˆ›å»º Supervisor Agent
2. å®šä¹‰è°ƒç”¨è®²è€…éªŒè¯ Agent çš„å·¥å…·
3. å¤„ç†å„ç§éªŒè¯åœºæ™¯
4. è§£é‡Šå’Œè½¬æ¢éªŒè¯ç»“æœ
5. æä¾›ç”¨æˆ·å‹å¥½çš„äº¤äº’ç•Œé¢

é€šè¿‡è¿™äº›ä¿¡æ¯ï¼ŒSupervisor Agent å¯ä»¥æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è®²è€…èº«ä»½éªŒè¯ç³»ç»Ÿï¼Œæä¾›æ›´æ™ºèƒ½çš„èº«ä»½éªŒè¯æœåŠ¡ï¼
## ğŸ¨ è‡ªå®šä¹‰é…ç½®

### è‡ªå®šä¹‰éªŒè¯é€»è¾‘
ä½ å¯ä»¥ä¿®æ”¹éªŒè¯é€»è¾‘æ¥é€‚åº”ç‰¹å®šéœ€æ±‚ï¼š

```python
# è‡ªå®šä¹‰ä¿¡æ¯æå–è§„åˆ™
def custom_extract_speaker_info(text):
    # æ·»åŠ ä½ çš„è‡ªå®šä¹‰æå–é€»è¾‘
    pass

# è‡ªå®šä¹‰éªŒè¯æ ‡å‡†
def custom_verification_criteria(extracted_info):
    # å®šä¹‰ä½ çš„éªŒè¯æ ‡å‡†
    pass
```

### è‡ªå®šä¹‰éªŒè¯æ ‡å‡†
ç¼–è¾‘`.config`æ–‡ä»¶ä¸­çš„`[PREAUDIT]`éƒ¨åˆ†ï¼š

```ini
[PREAUDIT]
TARGET_WORD = ä½ çš„ç‰¹æ®Šæ ‡è¯†
MIN_FILE_COUNT = æœ€ä½æ–‡æ¡£æ•°é‡
```

### å¤šç¯å¢ƒæ”¯æŒ
å¯ä»¥åˆ›å»ºä¸åŒçš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚`.config.dev`, `.config.prod`ï¼‰å¹¶åœ¨å¯åŠ¨æ—¶æŒ‡å®šï¼š

```bash
# å¼€å‘ç¯å¢ƒ
cp .config.dev .config

# ç”Ÿäº§ç¯å¢ƒ
cp .config.prod .config
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **é…ç½®æ–‡ä»¶å®‰å…¨**: `.config`æ–‡ä»¶åŒ…å«AWSå‡­è¯ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **ç½‘ç»œè®¿é—®**: MCP serveré€šè¿‡stdioé€šä¿¡ï¼Œç›¸å¯¹å®‰å…¨
3. **æƒé™æ§åˆ¶**: ç¡®ä¿AWSå‡­è¯åªæœ‰å¿…è¦çš„æœ€å°æƒé™
4. **æ—¥å¿—å®‰å…¨**: CloudWatchæ—¥å¿—å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œæ³¨æ„è®¿é—®æ§åˆ¶
5. **æ•°æ®éšç§**: è®²è€…èº«ä»½ä¿¡æ¯å±äºæ•æ„Ÿæ•°æ®ï¼Œéœ€è¦å¦¥å–„ä¿æŠ¤

## ğŸŒŸ æ”¯æŒçš„é›†æˆæ–¹å¼

### Chatbot UIæ”¯æŒ
ç†è®ºä¸Šæ”¯æŒæ‰€æœ‰å®ç°äº†MCPåè®®çš„chatbot UIï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- Claude Desktop
- è‡ªå®šä¹‰çš„MCPå®¢æˆ·ç«¯
- å…¶ä»–æ”¯æŒMCPçš„AIåº”ç”¨

### Supervisor Agenté›†æˆ
ç³»ç»Ÿå¯ä»¥ä½œä¸ºå·¥å…·è¢«Supervisor Agentè°ƒç”¨ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒé¡¹ç›®ä¸­çš„`supervisor_example.py`æ–‡ä»¶ã€‚

### APIé›†æˆ
ç³»ç»Ÿæä¾›æ ‡å‡†çš„å·¥å…·æ¥å£ï¼Œå¯ä»¥è¢«å…¶ä»–ç³»ç»Ÿè°ƒç”¨ï¼š

# ç›´æ¥è°ƒç”¨å·¥å…·å‡½æ•°
from speaker_validation_tools import check_string_content, perform_preaudit

# éªŒè¯è®²è€…ä¿¡æ¯
result = check_string_content("è®²è€…ä¿¡æ¯æ–‡æœ¬")
print(result['verification_passed'])


### å¸¸ç”¨è°ƒè¯•å‘½ä»¤
```bash
# é…ç½®éªŒè¯
python test_config.py

# åŠŸèƒ½æµ‹è¯•
python test_mcp_server.py

# æ—¥å¿—æµ‹è¯•
python test_cloudwatch_logs.py

# æ¼”ç¤ºåŠŸèƒ½
python pharma_demo.py
```

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
demoAgent/
â”œâ”€â”€ README.md                       # æœ¬æ–‡æ¡£
â”œâ”€â”€ agent.py                        # ä¸»Agentå®ç°
â”œâ”€â”€ mcp_server.py                   # MCP serverä¸»æ–‡ä»¶
â”œâ”€â”€ speaker_validation_tools.py     # ç‹¬ç«‹å·¥å…·å‡½æ•°
â”œâ”€â”€ config_reader.py               # é…ç½®è¯»å–æ¨¡å—
â”œâ”€â”€ cloudwatch_logger.py           # CloudWatchæ—¥å¿—æ¨¡å—
â”œâ”€â”€ pharma_demo.py                 # æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ mcp_config.json                # MCPé…ç½®æ–‡ä»¶
â”œâ”€â”€ .config.example                # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ .config                        # å®é™…é…ç½®æ–‡ä»¶ï¼ˆéœ€è¦åˆ›å»ºï¼‰
â”œâ”€â”€ requirements.txt               # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ install_optional_deps.py       # å¯é€‰ä¾èµ–å®‰è£…è„šæœ¬
â”œâ”€â”€ mcp_launcher.py                # MCPå¯åŠ¨å™¨
â”œâ”€â”€ start_mcp_server.py            # MCP serverå¯åŠ¨è„šæœ¬
â”œâ”€â”€ test_mcp_server.py             # MCP serveræµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_cloudwatch_logs.py        # CloudWatchæ—¥å¿—æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_config.py                 # é…ç½®æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_agent.py                  # AgentåŠŸèƒ½æµ‹è¯•è„šæœ¬
â”œâ”€â”€ debug_config.py                # é…ç½®è°ƒè¯•è„šæœ¬
â””â”€â”€ supervisor_example.py          # Supervisoré›†æˆç¤ºä¾‹
```


**æ›´æ–°æ—¥å¿—**:
- v1.1.0: æ™ºèƒ½æ–‡ä»¶å¤¹é€‰æ‹©æœºåˆ¶ï¼Œæ ¹æ®åŒ»ç”Ÿèº«ä»½æ£€æŸ¥ä¸“å±æ–‡ä»¶å¤¹
- v1.0.1: ä»å†…å®¹é¢„å®¡ç³»ç»Ÿå‡çº§ä¸ºè®²è€…èº«ä»½éªŒè¯ç³»ç»Ÿ
- v1.0.0: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€å†…å®¹é¢„å®¡åŠŸèƒ½
